<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Document</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>
    <link href="style.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="grid"></div>
    <script src="./streak.js"></script>
    <script>

      /*
      CLOCK: [2020-06-29 Mon 13:41]--[2020-06-29 Mon 14:22] =>  0:41
      CLOCK: [2020-06-29 Mon 14:25]--[2020-06-29 Mon 15:05] =>  0:40
      CLOCK: [2020-06-29 Mon 15:07]--[2020-06-29 Mon 15:28] =>  0:21
      CLOCK: [2020-06-29 Mon 18:50]--[2020-06-29 Mon 19:06] =>  0:16
      CLOCK: [2020-06-29 Mon 16:14]--[2020-06-29 Mon 17:42] =>  1:28
      CLOCK: [2020-06-29 Mon 21:49]--[2020-06-29 Mon 22:24] =>  0:35
      CLOCK: [2020-06-29 Mon 22:25]--[2020-06-29 Mon 23:25] =>  1:00
      CLOCK: [2020-06-30 Tue 13:30]--[2020-07-01 Wed 17:56] => 28:26
      CLOCK: [2020-07-01 Wed 15:05]--[2020-07-01 Wed 17:57] =>  2:52
      CLOCK: [2020-07-05 Sun 21:52] */
      // should return a datestring?
      function parseDiaryClockString(clockStr) {
	
      }
      
      var margin = {top: 20, right: 20, bottom: 50, left: 70},
	  width = 960 - margin.left - margin.right,
	  height = 500 - margin.top - margin.bottom;

      var grid = d3.select(".grid")
          .append("svg")
	  .attr("width","510px")
	  .attr("height","510px")
      	  
      var row = grid.selectAll(".row")
	  .data(gridData)
	  .enter().append("g")
	  .attr("class", "row");

      var colorScale = d3.scaleThreshold()
	  .domain([1, 2, 3, 4, 5, 6, 7, 8, 9])
	  .range(d3.schemeGreens[9]);
      
      var column = row.selectAll(".square")
	  .data(function(d) { return d; })
	  .enter().append("rect")
	  .attr("class","square")
	  .attr("x", function(d) { return d.x; })
	  .attr("y", function(d) { return d.y; })
	  .attr("width", function(d) { return d.width; })
	  .attr("height", function(d) { return d.height; })
      	  .attr("fill", (d) => {
	    x = parseInt(d.x / d.width) + 1;
	    y = parseInt(d.y / d.height) - 6;
	    today = new Date()
	    month = today.getMonth() - y
	    dayRem = x % 4 + 1
	    day = dayRem * (today.getDay() + 1)
	    d.date = new Date(Date.parse(`2020-${month}-${day}`))
	    d.total = d.date.getDate()
	    console.log(month, day)

	    return colorScale(d.total);
	  })

      
      var last_sq = d3.select(".square:last-of-type")
      

      
    </script>
  </body>
</html>
